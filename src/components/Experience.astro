---
// Experience.astro
const experiences = [
  {
    id: 'tech-company',
    period: '2022 - Present',
    role: 'Senior Full-Stack Developer',
    company: 'Tech Company Inc.',
    description: 'Leading development of scalable web applications using React, Node.js, and cloud technologies. Mentoring junior developers and driving architectural decisions.',
    achievements: [
      'Reduced application load time by 40%',
      'Implemented CI/CD pipeline reducing deployment time by 60%',
      'Led team of 5 developers on major product launch',
    ],
    technologies: ['React', 'Node.js', 'TypeScript', 'AWS'],
  },
  {
    id: 'digital-solutions',
    period: '2020 - 2022',
    role: 'Full-Stack Developer',
    company: 'Digital Solutions Ltd.',
    description: 'Developed and maintained multiple client projects using modern JavaScript frameworks and technologies.',
    achievements: [
      'Built 15+ responsive web applications',
      'Integrated third-party APIs and payment systems',
      'Improved code quality through testing and reviews',
    ],
    technologies: ['React', 'Next.js', 'Node.js', 'MongoDB'],
  },
  {
    id: 'creative-studio',
    period: '2019 - 2020',
    role: 'Frontend Developer',
    company: 'Creative Studio',
    description: 'Created engaging user interfaces and interactive experiences for various clients across different industries.',
    achievements: [
      'Designed and developed 20+ landing pages',
      'Achieved 95+ Google Lighthouse scores',
      'Collaborated with designers on UI/UX improvements',
    ],
    technologies: ['JavaScript', 'HTML5', 'CSS3', 'Vue.js'],
  },
];
---

<section id="experience" class="section-padding px-6 relative bg-dark-900/30 scroll-mt-20" data-scroll-section>
  <div class="max-w-5xl mx-auto">
    <div class="text-center mb-12" data-scroll-animate>
      <h2 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-4">
        My <span class="text-gradient">Experience</span>
      </h2>
      <div class="w-20 h-1 bg-gradient-to-r from-primary-400 to-primary-600 mx-auto rounded-full mb-3"></div>
      <p class="text-dark-400 max-w-2xl mx-auto">
        My professional journey across different companies
      </p>
    </div>

    <!-- Tabbed Experience Container -->
    <div class="glass-effect rounded-2xl overflow-hidden" data-scroll-animate>
      <!-- Tab Navigation -->
      <div class="flex flex-col md:flex-row border-b border-dark-700/50">
        <!-- Company Tabs (Sidebar on desktop, top on mobile) -->
        <div class="md:w-64 md:border-r border-dark-700/50 bg-dark-900/30">
          <div class="flex md:flex-col overflow-x-auto md:overflow-x-visible">
            {experiences.map((exp, index) => (
              <button
                class={`experience-tab px-6 py-4 text-left transition-all duration-300 whitespace-nowrap md:whitespace-normal ${index === 0 ? 'active' : ''}`}
                data-tab={exp.id}
              >
                <div class="flex items-center gap-3">
                  <div class="hidden md:block w-1 h-12 rounded-full bg-primary-500 opacity-0 transition-opacity tab-indicator"></div>
                  <div>
                    <p class="font-medium text-sm md:text-base tab-company">{exp.company}</p>
                    <p class="text-xs text-dark-400 mt-1">{exp.period}</p>
                  </div>
                </div>
              </button>
            ))}
          </div>
        </div>

        <!-- Content Area -->
        <div class="flex-1 p-8 md:p-10 min-h-[400px]">
          {experiences.map((exp, index) => (
            <div
              class={`experience-content ${index === 0 ? 'active' : ''}`}
              data-content={exp.id}
            >
              <!-- Role and Period -->
              <div class="mb-6">
                <h3 class="text-2xl md:text-3xl font-bold mb-2 text-gradient-hover">{exp.role}</h3>
                <p class="text-primary-500 font-medium text-lg mb-1">{exp.company}</p>
                <span class="inline-block px-4 py-1.5 rounded-full bg-primary-500/10 text-primary-400 text-sm font-medium">
                  {exp.period}
                </span>
              </div>

              <!-- Description -->
              <p class="text-dark-300 mb-6 leading-relaxed">{exp.description}</p>

              <!-- Achievements -->
              <div class="mb-6">
                <h4 class="text-sm font-bold text-dark-200 uppercase tracking-wide mb-4 flex items-center gap-2">
                  <span class="w-8 h-px bg-primary-500"></span>
                  Key Achievements
                </h4>
                <div class="space-y-3">
                  {exp.achievements.map((achievement) => (
                    <div class="flex items-start gap-3 group">
                      <span class="text-primary-500 mt-1 flex-shrink-0 group-hover:scale-110 transition-transform">â–¸</span>
                      <span class="text-dark-400 leading-relaxed">{achievement}</span>
                    </div>
                  ))}
                </div>
              </div>

              <!-- Technologies -->
              {exp.technologies && (
                <div>
                  <h4 class="text-sm font-bold text-dark-200 uppercase tracking-wide mb-3 flex items-center gap-2">
                    <span class="w-8 h-px bg-primary-500"></span>
                    Technologies
                  </h4>
                  <div class="flex flex-wrap gap-2">
                    {exp.technologies.map((tech) => (
                      <span class="px-4 py-2 text-sm rounded-lg bg-dark-800/80 text-dark-300 border border-dark-700 hover:border-primary-500/50 hover:text-primary-400 transition-all cursor-default">
                        {tech}
                      </span>
                    ))}
                  </div>
                </div>
              )}
            </div>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Tab Styling */
  .experience-tab {
    position: relative;
    cursor: pointer;
    border-bottom: 2px solid transparent;
  }

  .experience-tab:hover .tab-company {
    color: var(--primary-400);
  }

  .experience-tab.active {
    background: rgba(99, 102, 241, 0.05);
    border-color: var(--primary-500);
  }

  .experience-tab.active .tab-indicator {
    opacity: 1;
  }

  .experience-tab.active .tab-company {
    color: var(--primary-400);
  }

  @media (min-width: 768px) {
    .experience-tab {
      border-bottom: none;
      border-left: 3px solid transparent;
    }

    .experience-tab.active {
      border-left-color: var(--primary-500);
    }
  }

  /* Content Styling */
  .experience-content {
    display: none;
    animation: fadeIn 0.4s ease-out;
  }

  .experience-content.active {
    display: block;
  }

  /* Gradient hover effect */
  .text-gradient-hover {
    transition: all 0.3s ease;
  }
</style>

<script>
  // Tab switching functionality
  const tabs = document.querySelectorAll('.experience-tab');
  const contents = document.querySelectorAll('.experience-content');

  tabs.forEach((tab) => {
    tab.addEventListener('click', () => {
      const targetId = tab.getAttribute('data-tab');

      // Remove active class from all tabs and contents
      tabs.forEach((t) => t.classList.remove('active'));
      contents.forEach((c) => c.classList.remove('active'));

      // Add active class to clicked tab and corresponding content
      tab.classList.add('active');
      const targetContent = document.querySelector(`[data-content="${targetId}"]`);
      if (targetContent) {
        targetContent.classList.add('active');
      }
    });
  });
</script>
